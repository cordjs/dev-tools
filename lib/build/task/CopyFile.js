// Generated by CoffeeScript 1.9.1
(function() {
  var BuildTask, CopyFile, fs, mkdirp, path,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  fs = require('fs');

  path = require('path');

  mkdirp = require('mkdirp');

  BuildTask = require('./BuildTask');

  CopyFile = (function(superClass) {
    extend(CopyFile, superClass);

    function CopyFile() {
      return CopyFile.__super__.constructor.apply(this, arguments);
    }

    CopyFile.prototype.run = function() {
      var dst, src;
      src = this.params.baseDir + "/" + this.params.file;
      dst = this.params.targetDir + "/" + this.params.file;
      return mkdirp(path.dirname(dst), (function(_this) {
        return function(err) {
          var r;
          if (err) {
            throw err;
          }
          r = fs.createReadStream(src);
          r.pipe(fs.createWriteStream(dst));
          return r.on('end', function() {
            return _this.readyPromise.resolve();
          });
        };
      })(this));
    };

    return CopyFile;

  })(BuildTask);

  module.exports = CopyFile;

}).call(this);
